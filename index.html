<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Starbull | The Next MoonBull</title>
<!-- 引入Web3Modal（多钱包适配核心库） -->
<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3modal@1.9.12/dist/index.min.js"></script>
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:Inter, system-ui, -apple-system, sans-serif}
  body{background:#000;color:#fff;line-height:1.5}
  header{position:sticky;top:0;background:rgba(0,0,0,0.95);backdrop-filter:blur(12px);border-bottom:1px solid #222;z-index:999;padding:1rem 2rem}
  .container{max-width:1200px;margin:0 auto}
  .nav{display:flex;justify-content:space-between;align-items:center}
  .logo{font-size:1.5rem;font-weight:900;color:#ffd100}
  .menu{display:flex;gap:2rem}
  .menu a{color:#ccc;text-decoration:none;font-weight:600;transition:color 0.3s}
  .menu a:hover{color:#ffd100}

  /* Hero区 */
  .hero{padding:4rem 2rem;text-align:center}
  .hero h1{font-size:4rem;font-weight:900;color:#ffd100;margin-bottom:1rem}
  .hero p{max-width:800px;margin:0 auto 2rem;color:#aaa;font-size:1.1rem}

  /* 核心购买框（1:1 bullzilla.com） */
  .buy-section{padding:2rem 0 6rem}
  .buy-card{max-width:600px;margin:0 auto;background:linear-gradient(145deg, #111, #1a1a1a);border:1px solid #333;border-radius:1.5rem;padding:2rem;box-shadow:0 10px 30px rgba(0,0,0,0.5)}
  .buy-card h2{font-size:1.8rem;margin-bottom:1.5rem;color:#ffd100;text-align:center}
  
  /* 钱包连接区 */
  .wallet-section{margin-bottom:2rem}
  .wallet-btn{width:100%;padding:1rem;border-radius:1rem;background:linear-gradient(145deg, #ffd100, #ffb800);color:#000;border:none;font-weight:700;font-size:1rem;cursor:pointer;transition:all 0.3s}
  .wallet-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(255,209,0,0.4)}
  .wallet-status{text-align:center;margin-top:1rem;color:#aaa;font-size:0.9rem}
  
  /* 网络切换 */
  .network-switch{display:flex;justify-content:center;gap:0.8rem;margin:1.5rem 0;flex-wrap:wrap}
  .network-btn{padding:0.8rem 1.2rem;border-radius:0.8rem;border:1px solid #333;background:#1a1a1a;color:#fff;cursor:pointer;transition:all 0.3s;font-size:0.9rem}
  .network-btn.active{background:#ffd100;color:#000;border-color:#ffd100}
  
  /* 购买输入区（bullzilla风格） */
  .input-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem 0}
  .input-group{position:relative}
  .input-label{display:block;margin-bottom:0.5rem;color:#aaa;font-size:0.9rem}
  .input-field{width:100%;padding:1.2rem 1rem;border-radius:0.8rem;background:#222;border:1px solid #444;color:#fff;font-size:1rem;outline:none;transition:border 0.3s}
  .input-field:focus{border-color:#ffd100}
  .input-currency{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#aaa;font-size:0.9rem}
  
  /* 价格信息 */
  .price-info{text-align:center;margin:1.5rem 0;padding:1rem;background:#1a1a1a;border-radius:0.8rem;border:1px solid #333}
  .price-info span{color:#ffd100;font-weight:700}
  
  /* 购买按钮 */
  .buy-btn{width:100%;padding:1.2rem;border-radius:1rem;background:linear-gradient(145deg, #22c55e, #16a34a);color:#fff;border:none;font-weight:700;font-size:1.1rem;cursor:pointer;transition:all 0.3s;margin-top:1rem}
  .buy-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(34,197,94,0.4)}
  .buy-btn:disabled{background:#333;cursor:not-allowed;transform:none;box-shadow:none}
  
  /* 收款钱包信息 */
  .wallet-info{text-align:center;margin-top:1.5rem;color:#aaa;font-size:0.9rem}
  .wallet-info span{color:#ffd100}
  
  /* 其他模块保持moonbull风格 */
  .howto{padding:4rem 2rem;background:#0a0a0a}
  .howto h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:#ffd100}
  .steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}
  .step{background:#111;padding:1.5rem;border-radius:1rem;border:1px solid #222}
  .step h3{color:#ffd100;margin-bottom:0.8rem}
  .step p{color:#aaa}
  
  .tokenomics{padding:4rem 2rem}
  .tokenomics h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:#ffd100}
  .token-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem}
  .token-card{background:#111;padding:1.5rem;border-radius:1rem;border:1px solid #222;text-align:center}
  .token-card strong{font-size:1.2rem;display:block;margin-bottom:0.5rem}
  .token-card p{color:#aaa}
  
  footer{padding:2rem;text-align:center;border-top:1px solid #222;color:#777}
  footer a{color:#ffd100;text-decoration:none}

  /* 响应式 */
  @media (max-width:768px){
    .hero h1{font-size:2.5rem}
    .input-grid{grid-template-columns:1fr}
    .menu{gap:1rem;font-size:0.9rem}
    .buy-card{padding:1.5rem}
  }
</style>
</head>
<body>

<header>
  <div class="container nav">
    <div class="logo">STARBULL</div>
    <div class="menu">
      <a href="#home">Home</a>
      <a href="#buy">Buy Now</a>
      <a href="#howto">How To Buy</a>
      <a href="#tokenomics">Tokenomics</a>
      <a href="https://www.dx.app/dxlock/view/liquidity-locker?address=0xaDD700611C2d07b8dE36b95DD442EC1692503Fc4&chain=56" target="_blank">Locked LP</a>
    </div>
  </div>
</header>

<section class="hero" id="home">
  <div class="container">
    <h1>STARBULL</h1>
    <p>The next generation meme coin. Fair Launch, 0% Tax, Liquidity Locked 2 Years. Fully community driven. Just like MoonBull — but stronger.</p>
  </div>
</section>

<!-- 核心购买区（1:1 bullzilla.com） -->
<section class="buy-section" id="buy">
  <div class="container">
    <div class="buy-card">
      <h2>Buy STARBULL</h2>
      
      <!-- 钱包连接按钮 -->
      <div class="wallet-section">
        <button class="wallet-btn" id="connect-wallet-btn">Connect Wallet</button>
        <div class="wallet-status" id="wallet-status">Wallet not connected</div>
      </div>
      
      <!-- 主网切换 -->
      <div class="network-switch">
        <button class="network-btn active" data-network="bsc" data-chainid="56">BSC</button>
        <button class="network-btn" data-network="eth" data-chainid="1">Ethereum</button>
        <button class="network-btn" data-network="polygon" data-chainid="137">Polygon</button>
        <button class="network-btn" data-network="avalanche" data-chainid="43114">Avalanche</button>
      </div>
      
      <!-- 购买输入框（bullzilla风格） -->
      <div class="input-grid">
        <div class="input-group">
          <label class="input-label">You Pay</label>
          <input type="number" class="input-field" id="pay-amount" placeholder="0.0" min="0.01" step="0.01">
          <span class="input-currency" id="pay-currency">BNB</span>
        </div>
        <div class="input-group">
          <label class="input-label">You Get</label>
          <input type="number" class="input-field" id="get-amount" placeholder="0.0" readonly>
          <span class="input-currency">STARBULL</span>
        </div>
      </div>
      
      <!-- 价格信息 -->
      <div class="price-info">
        Current Price: <span id="current-price">1 BNB = 500,000 STARBULL</span>
      </div>
      
      <!-- 购买按钮 -->
      <button class="buy-btn" id="buy-token-btn" disabled>Buy STARBULL Now</button>
      
      <!-- 收款钱包信息 -->
      <div class="wallet-info">
        Presale Wallet: <span>0xA616911194eca5aD6E858a2aCFAC2cDaDC8f04B1</span>
      </div>
    </div>
  </div>
</section>

<!-- 其他模块 -->
<section class="howto" id="howto">
  <div class="container">
    <h2>How To Buy</h2>
    <div class="steps">
      <div class="step">
        <h3>1 Connect Wallet</h3>
        <p>Connect MetaMask, Trust Wallet or any other wallet to the website.</p>
      </div>
      <div class="step">
        <h3>2 Select Network</h3>
        <p>Choose your preferred network (BSC, Ethereum, Polygon, Avalanche).</p>
      </div>
      <div class="step">
        <h3>3 Enter Amount</h3>
        <p>Enter the amount of crypto you want to spend to buy STARBULL.</p>
      </div>
      <div class="step">
        <h3>4 Confirm Purchase</h3>
        <p>Confirm the transaction and receive your STARBULL instantly.</p>
      </div>
    </div>
  </div>
</section>

<section class="tokenomics" id="tokenomics">
  <div class="container">
    <h2>Tokenomics</h2>
    <div class="token-grid">
      <div class="token-card">
        <strong>Total Supply</strong>
        <p>1,000,000,000 $STARBULL</p>
      </div>
      <div class="token-card">
        <strong>Buy Tax</strong>
        <p>0%</p>
      </div>
      <div class="token-card">
        <strong>Sell Tax</strong>
        <p>0%</p>
      </div>
      <div class="token-card">
        <strong>Liquidity</strong>
        <p>✅ LOCKED 2 YEARS</p>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="container">
    <p>Contract: <a href="https://bscscan.com/address/0x36e18dCf2364F25701661C623945e99c6E39E61B" target="_blank">0x36e18dCf2364F25701661C623945e99c6E39E61B</a></p>
    <br>
    <p>Starbull © 2026 | Inspired by MoonBull & Bullzilla | Fair Launch</p>
  </div>
</footer>

<script>
  // 核心配置（可直接修改）
  const CONFIG = {
    // 你的收款钱包（所有主网通用）
    presaleWallet: "0xA616911194eca5aD6E858a2aCFAC2cDaDC8f04B1",
    // 代币合约地址（各主网）
    tokenContracts: {
      bsc: "0x36e18dCf2364F25701661C623945e99c6E39E61B",
      eth: "0x36e18dCf2364F25701661C623945e99c6E39E61B", // 替换ETH合约
      polygon: "0x36e18dCf2364F25701661C623945e99c6E39E61B", // 替换Polygon合约
      avalanche: "0x36e18dCf2364F25701661C623945e99c6E39E61B" // 替换Avalanche合约
    },
    // 各主网默认货币及兑换比例
    networkConfig: {
      bsc: {
        currency: "BNB",
        contract: "0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c", // WBNB
        rate: 500000 // 1 BNB = 50万 STARBULL
      },
      eth: {
        currency: "ETH",
        contract: "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2", // WETH
        rate: 1000000 // 1 ETH = 100万 STARBULL
      },
      polygon: {
        currency: "MATIC",
        contract: "0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270", // WMATIC
        rate: 5000 // 1 MATIC = 5000 STARBULL
      },
      avalanche: {
        currency: "AVAX",
        contract: "0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7", // WAVAX
        rate: 80000 // 1 AVAX = 8万 STARBULL
      }
    }
  };

  // 全局变量
  let web3Modal;
  let provider;
  let signer;
  let currentAccount = null;
  let currentNetwork = "bsc";
  let currentConfig = CONFIG.networkConfig.bsc;

  // DOM元素
  const connectWalletBtn = document.getElementById('connect-wallet-btn');
  const walletStatus = document.getElementById('wallet-status');
  const networkBtns = document.querySelectorAll('.network-btn');
  const payAmountInput = document.getElementById('pay-amount');
  const getAmountInput = document.getElementById('get-amount');
  const payCurrency = document.getElementById('pay-currency');
  const currentPrice = document.getElementById('current-price');
  const buyTokenBtn = document.getElementById('buy-token-btn');

  // 初始化Web3Modal（多钱包支持）
  function initWeb3Modal() {
    const providerOptions = {
      walletconnect: {
        package: WalletConnectProvider,
        options: {
          infuraId: "27e484dcd9e3efcfd25a83a78777cdf1" // 公共Infura ID，可替换成自己的
        }
      }
    };

    web3Modal = new Web3Modal({
      cacheProvider: true, // 记住上次连接的钱包
      providerOptions,
      disableInjectedProvider: false // 显示MetaMask等内置钱包
    });
  }

  // 连接钱包
  connectWalletBtn.addEventListener('click', async () => {
    try {
      // 初始化Web3Modal
      if (!web3Modal) initWeb3Modal();

      // 连接钱包
      provider = await web3Modal.connect();
      const web3Provider = new ethers.providers.Web3Provider(provider);
      signer = web3Provider.getSigner();

      // 获取账户
      const accounts = await web3Provider.listAccounts();
      currentAccount = accounts[0];

      // 监听账户变化
      provider.on('accountsChanged', (accounts) => {
        currentAccount = accounts[0];
        updateWalletStatus();
      });

      // 监听网络变化
      provider.on('chainChanged', (chainId) => {
        window.location.reload(); // 网络变化刷新页面
      });

      // 切换到当前选中的网络
      await switchNetwork(currentNetwork);

      // 更新UI
      updateWalletStatus();
      buyTokenBtn.disabled = false;

    } catch (error) {
      console.error('Wallet connection error:', error);
      alert('Failed to connect wallet! Please try again.');
    }
  });

  // 更新钱包状态显示
  function updateWalletStatus() {
    if (currentAccount) {
      walletStatus.textContent = `Connected: ${currentAccount.substring(0, 6)}...${currentAccount.substring(38)}`;
      connectWalletBtn.textContent = "Change Wallet";
    } else {
      walletStatus.textContent = "Wallet not connected";
      connectWalletBtn.textContent = "Connect Wallet";
    }
  }

  // 切换主网
  networkBtns.forEach(btn => {
    btn.addEventListener('click', async () => {
      // 更新选中状态
      networkBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // 更新当前网络
      currentNetwork = btn.dataset.network;
      currentConfig = CONFIG.networkConfig[currentNetwork];

      // 切换链
      await switchNetwork(currentNetwork);

      // 更新UI
      payCurrency.textContent = currentConfig.currency;
      currentPrice.textContent = `1 ${currentConfig.currency} = ${currentConfig.rate.toLocaleString()} STARBULL`;
      calculateTokens();
    });
  });

  // 切换区块链网络
  async function switchNetwork(network) {
    const chainId = CONFIG.networkConfig[network].chainId || networkBtns.find(b => b.dataset.network === network).dataset.chainid;
    
    try {
      await provider.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: `0x${parseInt(chainId).toString(16)}` }]
      });
    } catch (error) {
      // 如果网络未添加，请求添加
      if (error.code === 4902) {
        try {
          await provider.request({
            method: 'wallet_addEthereumChain',
            params: [getNetworkParams(chainId)]
          });
        } catch (addError) {
          console.error('Failed to add network:', addError);
          alert(`Please manually switch to ${network.toUpperCase()} network in your wallet.`);
        }
      } else {
        console.error('Network switch error:', error);
        alert(`Please switch to ${network.toUpperCase()} network in your wallet.`);
      }
    }
  }

  // 网络参数配置
  function getNetworkParams(chainId) {
    const params = {
      // BSC主网
      56: {
        chainId: '0x38',
        chainName: 'Binance Smart Chain',
        nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
        rpcUrls: ['https://bsc-dataseed.binance.org/'],
        blockExplorerUrls: ['https://bscscan.com/']
      },
      // Ethereum主网
      1: {
        chainId: '0x1',
        chainName: 'Ethereum',
        nativeCurrency: { name: 'Ether', symbol: 'ETH', decimals: 18 },
        rpcUrls: ['https://mainnet.infura.io/v3/27e484dcd9e3efcfd25a83a78777cdf1'],
        blockExplorerUrls: ['https://etherscan.io/']
      },
      // Polygon主网
      137: {
        chainId: '0x89',
        chainName: 'Polygon',
        nativeCurrency: { name: 'MATIC', symbol: 'MATIC', decimals: 18 },
        rpcUrls: ['https://polygon-rpc.com/'],
        blockExplorerUrls: ['https://polygonscan.com/']
      },
      // Avalanche主网
      43114: {
        chainId: '0xA86A',
        chainName: 'Avalanche',
        nativeCurrency: { name: 'AVAX', symbol: 'AVAX', decimals: 18 },
        rpcUrls: ['https://api.avax.network/ext/bc/C/rpc'],
        blockExplorerUrls: ['https://snowtrace.io/']
      }
    };
    return params[chainId];
  }

  // 计算可购买代币数量
  function calculateTokens() {
    const amount = parseFloat(payAmountInput.value) || 0;
    const tokens = amount * currentConfig.rate;
    getAmountInput.value = tokens.toLocaleString();
  }

  // 监听输入变化
  payAmountInput.addEventListener('input', calculateTokens);

  // 购买代币逻辑
  buyTokenBtn.addEventListener('click', async () => {
    if (!currentAccount || !signer) {
      alert('Please connect your wallet first!');
      return;
    }

    const amount = parseFloat(payAmountInput.value);
    if (!amount || amount <= 0) {
      alert('Please enter a valid amount!');
      return;
    }

    try {
      if (currentConfig.currency === 'BNB' || currentConfig.currency === 'ETH' || currentConfig.currency === 'MATIC' || currentConfig.currency === 'AVAX') {
        // 发送原生代币到收款钱包
        const tx = await signer.sendTransaction({
          to: CONFIG.presaleWallet,
          value: ethers.utils.parseEther(amount.toString())
        });
        
        alert(`Transaction sent! Hash: ${tx.hash}\nWaiting for confirmation...`);
        await tx.wait();
        alert('Transaction confirmed! You will receive your STARBULL shortly.');
        
      } else {
        // 发送ERC20/BEP20代币
        const contract = new ethers.Contract(
          currentConfig.contract,
          ['function transfer(address to, uint256 amount) returns (bool)'],
          signer
        );
        
        const amountWei = ethers.utils.parseUnits(amount.toString(), 18);
        const tx = await contract.transfer(CONFIG.presaleWallet, amountWei);
        
        alert(`Transaction sent! Hash: ${tx.hash}\nWaiting for confirmation...`);
        await tx.wait();
        alert('Transaction confirmed! You will receive your STARBULL shortly.');
      }

    } catch (error) {
      console.error('Purchase error:', error);
      alert(`Purchase failed! Error: ${error.message}`);
    }
  });

  // 页面加载完成初始化
  window.addEventListener('load', () => {
    // 恢复上次连接的钱包
    if (web3Modal && web3Modal.cachedProvider) {
      connectWalletBtn.click();
    }
    calculateTokens();
  });
</script>
</body>
</html>
