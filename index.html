<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullforge - Forging the Future on BNB Chain</title>
    <!-- ÂºïÂÖ• Ethers.js -->
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <style>
        /* ==================== ÂÖ®Â±ÄÊ†∑Âºè ==================== */
        :root {
            --primary-gold: #FFD700;
            --dark-bg: #0a0a0a;
            --card-bg: #1a1a1a;
            --text-white: #ffffff;
            --text-gray: #aaaaaa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-white);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ==================== Hero Âå∫Âüü ==================== */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 100px 0;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a0a0a 100%);
        }

        .logo {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-gold);
            margin-bottom: 20px;
            text-shadow: 0 0 20px var(--primary-gold);
        }

        .slogan {
            font-size: 1.5rem;
            color: var(--text-gray);
            margin-bottom: 40px;
        }

        /* Èí±ÂåÖÁä∂ÊÄÅ */
        .wallet-status {
            margin-bottom: 20px;
            padding: 10px 20px;
            background: var(--card-bg);
            border-radius: 10px;
            border: 1px solid #333;
        }

        .wallet-address {
            color: var(--primary-gold);
            font-family: monospace;
        }

        /* ÂÄíËÆ°Êó∂Ê†∑Âºè */
        .countdown {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .countdown-item {
            background: var(--card-bg);
            padding: 20px 30px;
            border-radius: 10px;
            border: 2px solid var(--primary-gold);
        }

        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-gold);
        }

        .countdown-label {
            font-size: 0.9rem;
            color: var(--text-gray);
        }

        /* ‰ª∑Ê†ºÂ±ïÁ§∫ */
        .price-section {
            margin-bottom: 40px;
            width: 100%;
            max-width: 600px;
        }

        .current-price {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-gold);
        }

        .next-price {
            font-size: 1.2rem;
            color: var(--text-gray);
            margin-top: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-gold), #ff8c00);
            width: 0%;
            transition: width 0.5s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 1.3rem;
            color: var(--primary-gold);
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-gray);
        }

        /* Ë¥≠‰π∞Ë°®Âçï */
        .buy-form {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #333;
            max-width: 500px;
            width: 100%;
            margin-top: 20px;
        }

        .buy-form input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            background: #0a0a0a;
            border: 2px solid #333;
            border-radius: 10px;
            color: var(--text-white);
            margin-bottom: 15px;
        }

        .buy-form input:focus {
            outline: none;
            border-color: var(--primary-gold);
        }

        .token-estimate {
            color: var(--text-gray);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        /* ÊåâÈíÆÊ†∑Âºè */
        .btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            width: 100%;
        }

        .btn-primary {
            background: var(--primary-gold);
            color: var(--dark-bg);
        }

        .btn-primary:hover:not(:disabled) {
            box-shadow: 0 0 30px var(--primary-gold);
            transform: scale(1.02);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-gold);
            border: 2px solid var(--primary-gold);
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 1rem;
            width: auto;
        }

        /* ==================== ÈÄöÁî®Âå∫ÂùóÊ†∑Âºè ==================== */
        .section {
            padding: 100px 0;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 60px;
            color: var(--primary-gold);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 15px;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--primary-gold);
            transform: translateY(-10px);
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--primary-gold);
            margin-bottom: 20px;
        }

        /* ==================== ‰ª£Â∏ÅÁªèÊµéÂ≠¶ ==================== */
        .tokenomics-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #333;
        }

        .tokenomics-percent {
            color: var(--primary-gold);
            font-weight: bold;
        }

        /* ==================== Ë¥®ÊäºÂå∫Âüü ==================== */
        .staking-section {
            background: var(--card-bg);
        }

        .staking-form {
            max-width: 500px;
            margin: 0 auto;
        }

        .staking-form select {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            background: #0a0a0a;
            border: 2px solid #333;
            border-radius: 10px;
            color: var(--text-white);
            margin-bottom: 15px;
        }

        /* ==================== ÁáÉÁÉßÂ±ïÁ§∫ ==================== */
        .burn-counter {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-gold);
            text-align: center;
            animation: burn 1.5s ease-in-out infinite;
        }

        @keyframes burn {
            0%, 100% { text-shadow: 0 0 10px var(--primary-gold); }
            50% { text-shadow: 0 0 30px var(--primary-gold), 0 0 50px #ff8c00; }
        }

        /* ==================== È°µËÑö ==================== */
        .footer {
            background: var(--card-bg);
            padding: 50px 0;
            text-align: center;
            border-top: 1px solid #333;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-gray);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-gold);
        }

        /* ÂìçÂ∫îÂºèÈÄÇÈÖç */
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            .countdown-item {
                padding: 15px 20px;
            }
            .countdown-number {
                font-size: 1.8rem;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-gray);
            border-radius: 50%;
            border-top-color: var(--primary-gold);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ÈÄöÁü•Ê∂àÊÅØ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: var(--card-bg);
            border: 1px solid var(--primary-gold);
            border-radius: 10px;
            color: var(--text-white);
            z-index: 1000;
            display: none;
        }

        .notification.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <!-- ÈÄöÁü•Ê∂àÊÅØ -->
    <div id="notification" class="notification"></div>

    <!-- ==================== Hero Âå∫Âüü ==================== -->
    <section class="hero">
        <div class="container">
            <div class="logo">üêÇ Bullforge</div>
            <div class="slogan">The Future isn't Just Bullish. It's Bullforge.</div>

            <!-- Èí±ÂåÖÁä∂ÊÄÅ -->
            <div class="wallet-status" id="walletStatus" style="display: none;">
                <span>Wallet: </span>
                <span class="wallet-address" id="walletAddress"></span>
                <button class="btn btn-small btn-secondary" onclick="disconnectWallet()" style="margin-left: 15px;">Disconnect</button>
            </div>

            <!-- ÂÄíËÆ°Êó∂ -->
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">--</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">--</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">--</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">--</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>

            <!-- ‰ª∑Ê†ºÂ±ïÁ§∫ -->
            <div class="price-section">
                <div class="current-price" id="currentPrice">
                    <span class="loading"></span> Loading...
                </div>
                <div class="next-price" id="nextPrice" style="display: none;"></div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalRaised">
                            <span class="loading"></span>
                        </div>
                        <div class="stat-label">Total Raised (BNB)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="currentStage">
                            <span class="loading"></span>
                        </div>
                        <div class="stat-label">Current Stage</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="tokenRate">
                            <span class="loading"></span>
                        </div>
                        <div class="stat-label">1 BNB = ? BULL</div>
                    </div>
                </div>
            </div>

            <!-- Ë¥≠‰π∞Ë°®Âçï -->
            <div class="buy-form">
                <h3 style="margin-bottom: 20px; color: var(--primary-gold);">Buy $BULL Tokens</h3>
                
                <input type="number" id="bnbAmount" placeholder="Amount in BNB (e.g., 0.1)" step="0.01" min="0">
                
                <input type="text" id="referrerAddress" placeholder="Referrer Address (Optional)">
                
                <div class="token-estimate" id="tokenEstimate">
                    Enter BNB amount to see estimated $BULL
                </div>

                <button class="btn btn-primary" id="buyButton" onclick="buyTokens()" disabled>
                    Connect Wallet to Buy
                </button>

                <div style="margin-top: 20px;">
                    <button class="btn btn-secondary btn-small" id="claimButton" onclick="claimTokens()" style="display: none;">
                        Claim Tokens
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== About Âå∫Âüü ==================== -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">About Bullforge</h2>
            <div class="card">
                <p style="font-size: 1.2rem; text-align: center; max-width: 800px; margin: 0 auto;">
                    Bullforge is a BNB Chain-based meme coin forged in the chaos of the blockchain. 
                    Driven by a Progressive Price Engine that increases value every milestone ‚Äî 
                    plus a Forge Burn at each stage to make every $BULL scarcer.
                </p>
            </div>
        </div>
    </section>

    <!-- ==================== ‰ª£Â∏ÅÁªèÊµéÂ≠¶ ==================== -->
    <section class="section" style="background: var(--card-bg);">
        <div class="container">
            <h2 class="section-title">Bullforge DNA (Tokenomics)</h2>
            <div class="card-grid">
                <div class="card">
                    <h3 class="card-title">Total Supply</h3>
                    <div class="tokenomics-item">
                        <span id="totalSupplyDisplay">Loading...</span>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Presale</h3>
                    <div class="tokenomics-item">
                        <span>50%</span>
                        <span class="tokenomics-percent" id="presaleAllocation">Loading...</span>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Staking</h3>
                    <div class="tokenomics-item">
                        <span>20%</span>
                        <span class="tokenomics-percent" id="stakingAllocation">Loading...</span>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Burn Reserve</h3>
                    <div class="tokenomics-item">
                        <span>5%</span>
                        <span class="tokenomics-percent" id="burnReserve">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== Ë¥®ÊäºÂå∫Âüü ==================== -->
    <section class="section staking-section">
        <div class="container">
            <h2 class="section-title">The HODL Furnace - Staking</h2>
            <div class="card staking-form">
                <h3 class="card-title">Stake Your $BULL</h3>
                <input type="number" id="stakeAmount" placeholder="Amount in $BULL" step="1" min="0">
                <select id="lockDays">
                    <option value="30">30 Days Lock</option>
                    <option value="90">90 Days Lock</option>
                    <option value="180">180 Days Lock</option>
                    <option value="365">365 Days Lock</option>
                </select>
                <button class="btn btn-primary" id="stakeButton" onclick="stakeTokens()" disabled>
                    Connect Wallet to Stake
                </button>
                <div style="margin-top: 20px;">
                    <button class="btn btn-secondary btn-small" id="unstakeButton" onclick="unstakeTokens()" style="display: none;">
                        Unstake
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== ÁáÉÁÉßÂ±ïÁ§∫ ==================== -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">Forge Burn</h2>
            <div class="burn-counter" id="burnCounter">
                <span class="loading"></span> Loading Burn Data...
            </div>
            <p style="text-align: center; margin-top: 20px; color: var(--text-gray);">
                Permanent supply reduction at every milestone.
            </p>
        </div>
    </section>

    <!-- ==================== Ë∑ØÁ∫øÂõæ ==================== -->
    <section class="section" style="background: var(--card-bg);">
        <div class="container">
            <h2 class="section-title">Roadmap</h2>
            <div class="card-grid">
                <div class="card">
                    <h3 class="card-title">Phase I: The Awakening</h3>
                    <p>Q1 2026</p>
                    <ul style="margin-top: 15px; color: var(--text-gray);">
                        <li>Concept Born</li>
                        <li>Smart Contract Development</li>
                        <li>Website Launch</li>
                        <li>Presale Start</li>
                    </ul>
                </div>
                <div class="card">
                    <h3 class="card-title">Phase II: Growth</h3>
                    <p>Q2 2026</p>
                    <ul style="margin-top: 15px; color: var(--text-gray);">
                        <li>Presale Completion</li>
                        <li>Token Launch</li>
                        <li>DEX Listings</li>
                        <li>Staking Enabled</li>
                    </ul>
                </div>
                <div class="card">
                    <h3 class="card-title">Phase III: Expansion</h3>
                    <p>Q3-Q4 2026</p>
                    <ul style="margin-top: 15px; color: var(--text-gray);">
                        <li>Community Building</li>
                        <li>Marketing Campaigns</li>
                        <li>CEX Listings</li>
                        <li>Further Development</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== È°µËÑö ==================== -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="#">Twitter</a>
                <a href="#">Telegram</a>
                <a href="#">Discord</a>
                <a href="#">Whitepaper</a>
                <a href="https://bscscan.com/address/0x16D6c1a692AaC51a3821bA2903115d4600649F07" target="_blank">BSCScan</a>
            </div>
            <p style="color: var(--text-gray);">¬© 2026 Bullforge. All rights reserved.</p>
            <p style="color: var(--text-gray); margin-top: 10px; font-family: monospace; font-size: 0.9rem;">
                Contract: 0x16D6c1a692AaC51a3821bA2903115d4600649F07
            </p>
        </div>
    </footer>

    <script>
        // ==================== Ê†∏ÂøÉÈÖçÁΩÆ ====================
        const CONFIG = {
            // ‰Ω†ÁöÑ BNB Êô∫ËÉΩÂêàÁ∫¶Âú∞ÂùÄ
            CONTRACT_ADDRESS: "0x16D6c1a692AaC51a3821bA2903115d4600649F07",
            // ‰Ω†ÁöÑÂêàÁ∫¶ ABI
            CONTRACT_ABI: [
                {
                    "inputs": [{"internalType": "address payable","name": "_teamWallet","type": "address"}],
                    "stateMutability": "nonpayable",
                    "type": "constructor"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {"indexed": true,"internalType": "address","name": "owner","type": "address"},
                        {"indexed": true,"internalType": "address","name": "spender","type": "address"},
                        {"indexed": false,"internalType": "uint256","name": "value","type": "uint256"}
                    ],
                    "name": "Approval",
                    "type": "event"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "spender","type": "address"},
                        {"internalType": "uint256","name": "amount","type": "uint256"}
                    ],
                    "name": "approve",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "uint256","name": "amount","type": "uint256"}],
                    "name": "burn",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "account","type": "address"},
                        {"internalType": "uint256","name": "amount","type": "uint256"}
                    ],
                    "name": "burnFrom",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "_referrer","type": "address"},
                        {"internalType": "uint256","name": "_minTokensOut","type": "uint256"}
                    ],
                    "name": "buyTokens",
                    "outputs": [],
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "claimTokens",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "spender","type": "address"},
                        {"internalType": "uint256","name": "subtractedValue","type": "uint256"}
                    ],
                    "name": "decreaseAllowance",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "depositFunds",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "endPresale",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "spender","type": "address"},
                        {"internalType": "uint256","name": "addedValue","type": "uint256"}
                    ],
                    "name": "increaseAllowance",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {"indexed": true,"internalType": "address","name": "previousOwner","type": "address"},
                        {"indexed": true,"internalType": "address","name": "newOwner","type": "address"}
                    ],
                    "name": "OwnershipTransferred",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [],
                    "name": "PresaleEnded",
                    "type": "event"
                },
                {
                    "inputs": [],
                    "name": "renounceOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {"indexed": false,"internalType": "uint256","name": "amount","type": "uint256"},
                        {"indexed": false,"internalType": "uint256","name": "stage","type": "uint256"}
                    ],
                    "name": "RoarBurn",
                    "type": "event"
                },
                {
                    "inputs": [
                        {"internalType": "uint256","name": "_amount","type": "uint256"},
                        {"internalType": "uint256","name": "_lockDays","type": "uint256"}
                    ],
                    "name": "stake",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [{"indexed": false,"internalType": "uint256","name": "stage","type": "uint256"}],
                    "name": "StakingEnabled",
                    "type": "event"
                },
                {
                    "inputs": [],
                    "name": "startPresale",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {"indexed": true,"internalType": "address","name": "buyer","type": "address"},
                        {"indexed": false,"internalType": "uint256","name": "tokenAmount","type": "uint256"},
                        {"indexed": false,"internalType": "uint256","name": "bnbAmount","type": "uint256"}
                    ],
                    "name": "TokensPurchased",
                    "type": "event"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "to","type": "address"},
                        {"internalType": "uint256","name": "amount","type": "uint256"}
                    ],
                    "name": "transfer",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {"indexed": true,"internalType": "address","name": "from","type": "address"},
                        {"indexed": true,"internalType": "address","name": "to","type": "address"},
                        {"indexed": false,"internalType": "uint256","name": "value","type": "uint256"}
                    ],
                    "name": "Transfer",
                    "type": "event"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "from","type": "address"},
                        {"internalType": "address","name": "to","type": "address"},
                        {"internalType": "uint256","name": "amount","type": "uint256"}
                    ],
                    "name": "transferFrom",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "newOwner","type": "address"}],
                    "name": "transferOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "uint256","name": "_index","type": "uint256"}],
                    "name": "unstake",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "owner","type": "address"},
                        {"internalType": "address","name": "spender","type": "address"}
                    ],
                    "name": "allowance",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "account","type": "address"}],
                    "name": "balanceOf",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "BURN_RESERVE",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "claimStartTime",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "currentPriceStage",
                    "outputs": [{"internalType": "uint88","name": "","type": "uint88"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "currentRate",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "decimals",
                    "outputs": [{"internalType": "uint8","name": "","type": "uint8"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "","type": "address"}],
                    "name": "hasClaimed",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "lastPriceIncreaseRaised",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "lastPriceIncreaseTime",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "name",
                    "outputs": [{"internalType": "string","name": "","type": "string"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "owner",
                    "outputs": [{"internalType": "address","name": "","type": "address"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "PRESALE_ALLOCATION",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "presaleActive",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "presaleEnded",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "presaleEndTime",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "","type": "address"}],
                    "name": "referrers",
                    "outputs": [{"internalType": "address","name": "","type": "address"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "STAKING_ALLOCATION",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "stakingEnabled",
                    "outputs": [{"internalType": "bool","name": "","type": "bool"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "symbol",
                    "outputs": [{"internalType": "string","name": "","type": "string"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "teamWallet",
                    "outputs": [{"internalType": "address payable","name": "","type": "address"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "TOTAL_SUPPLY",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "totalRaised",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "totalSupply",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "","type": "address"}],
                    "name": "userPurchases",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [{"internalType": "address","name": "","type": "address"}],
                    "name": "userReferralBonuses",
                    "outputs": [{"internalType": "uint256","name": "","type": "uint256"}],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {"internalType": "address","name": "","type": "address"},
                        {"internalType": "uint256","name": "","type": "uint256"}
                    ],
                    "name": "userStakes",
                    "outputs": [
                        {"internalType": "uint256","name": "amount","type": "uint256"},
                        {"internalType": "uint256","name": "startTime","type": "uint256"},
                        {"internalType": "uint256","name": "lockDays","type": "uint256"}
                    ],
                    "stateMutability": "view",
                    "type": "function"
                }
            ],
            // BNB Chain ÈÖçÁΩÆ
            CHAIN_ID: "0x38", // BSC ‰∏ªÁΩë
            CHAIN_NAME: "Binance Smart Chain",
            RPC_URL: "https://bsc-dataseed.binance.org/",
            CURRENCY_NAME: "BNB",
            CURRENCY_SYMBOL: "BNB",
            DECIMALS: 18
        };

        // ==================== ÂÖ®Â±ÄÂèòÈáè ====================
        let provider = null;
        let signer = null;
        let contract = null;
        let userAddress = null;
        let decimals = 18;

        // ==================== ÂàùÂßãÂåñ ====================
        window.addEventListener('load', async () => {
            await initContract();
            await loadContractData();
            setupEventListeners();
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ËøûÊé•Èí±ÂåÖ
            if (window.ethereum) {
                const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                if (accounts.length > 0) {
                    await connectWallet();
                }
            }
        });

        // ==================== ÂêàÁ∫¶ÂàùÂßãÂåñ ====================
        async function initContract() {
            try {
                // ‰ΩøÁî®Âè™ËØª Provider
                provider = new ethers.providers.JsonRpcProvider(CONFIG.RPC_URL);
                contract = new ethers.Contract(CONFIG.CONTRACT_ADDRESS, CONFIG.CONTRACT_ABI, provider);
                
                // Ëé∑ÂèñÂ∞èÊï∞‰ΩçÊï∞
                decimals = await contract.decimals();
            } catch (error) {
                console.error("Failed to initialize contract:", error);
                showNotification("Failed to connect to blockchain. Please refresh.");
            }
        }

        // ==================== Âä†ËΩΩÂêàÁ∫¶Êï∞ÊçÆ ====================
        async function loadContractData() {
            try {
                // Âπ∂Ë°åÂä†ËΩΩÊâÄÊúâÊï∞ÊçÆ
                const [
                    name,
                    symbol,
                    totalSupply,
                    totalRaised,
                    currentRate,
                    currentStage,
                    presaleActive,
                    presaleEnded,
                    presaleEndTime,
                    burnReserve,
                    presaleAllocation,
                    stakingAllocation
                ] = await Promise.all([
                    contract.name(),
                    contract.symbol(),
                    contract.TOTAL_SUPPLY(),
                    contract.totalRaised(),
                    contract.currentRate(),
                    contract.currentPriceStage(),
                    contract.presaleActive(),
                    contract.presaleEnded(),
                    contract.presaleEndTime(),
                    contract.BURN_RESERVE(),
                    contract.PRESALE_ALLOCATION(),
                    contract.STAKING_ALLOCATION()
                ]);

                // Êõ¥Êñ∞ UI
                updateTokenDisplay(name, symbol, totalSupply);
                updatePriceDisplay(currentRate, currentStage);
                updateRaisedDisplay(totalRaised);
                updateTokenomics(burnReserve, presaleAllocation, stakingAllocation);
                updateCountdown(presaleEndTime, presaleActive, presaleEnded);
                updateBurnCounter(burnReserve);

            } catch (error) {
                console.error("Failed to load contract data:", error);
            }
        }

        // ==================== UI Êõ¥Êñ∞ÂáΩÊï∞ ====================
        function updateTokenDisplay(name, symbol, totalSupply) {
            document.getElementById('totalSupplyDisplay').textContent = 
                `${ethers.utils.formatUnits(totalSupply, decimals)} $${symbol}`;
        }

        function updatePriceDisplay(currentRate, currentStage) {
            const rate = ethers.utils.formatUnits(currentRate, 0);
            document.getElementById('currentPrice').textContent = `Current Rate: 1 BNB = ${rate} BULL`;
            document.getElementById('currentStage').textContent = `Stage ${currentStage.toNumber() + 1}`;
            document.getElementById('tokenRate').textContent = `${rate} BULL`;
        }

        function updateRaisedDisplay(totalRaised) {
            const raised = ethers.utils.formatEther(totalRaised);
            document.getElementById('totalRaised').textContent = `${parseFloat(raised).toFixed(2)} BNB`;
            
            // Êõ¥Êñ∞ËøõÂ∫¶Êù°ÔºàÂÅáËÆæÁ°¨È°∂‰∏∫ 1000 BNBÔºåÂèØÊ†πÊçÆÂÆûÈôÖ‰øÆÊîπÔºâ
            const hardCap = 1000;
            const progress = Math.min((parseFloat(raised) / hardCap) * 100, 100);
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateTokenomics(burnReserve, presaleAllocation, stakingAllocation) {
            document.getElementById('burnReserve').textContent = 
                `${ethers.utils.formatUnits(burnReserve, decimals)} BULL`;
            document.getElementById('presaleAllocation').textContent = 
                `${ethers.utils.formatUnits(presaleAllocation, decimals)} BULL`;
            document.getElementById('stakingAllocation').textContent = 
                `${ethers.utils.formatUnits(stakingAllocation, decimals)} BULL`;
        }

        function updateCountdown(presaleEndTime, presaleActive, presaleEnded) {
            if (presaleEnded) {
                document.getElementById('countdown').innerHTML = 
                    "<div class='countdown-item'><div class='countdown-number' style='color: var(--primary-gold);'>PRESALE</div><div class='countdown-label'>ENDED</div></div>";
                return;
            }

            if (!presaleActive) {
                document.getElementById('countdown').innerHTML = 
                    "<div class='countdown-item'><div class='countdown-number' style='color: var(--text-gray);'>PRESALE</div><div class='countdown-label'>NOT STARTED</div></div>";
                return;
            }

            // Êõ¥Êñ∞ÂÄíËÆ°Êó∂
            const endTime = presaleEndTime.toNumber() * 1000;
            updateCountdownTimer(endTime);
            setInterval(() => updateCountdownTimer(endTime), 1000);
        }

        function updateCountdownTimer(endTime) {
            const now = Date.now();
            const distance = endTime - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").textContent = String(days).padStart(2, '0');
                document.getElementById("hours").textContent = String(hours).padStart(2, '0');
                document.getElementById("minutes").textContent = String(minutes).padStart(2, '0');
                document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');
            } else {
                document.getElementById('countdown').innerHTML = 
                    "<div class='countdown-item'><div class='countdown-number' style='color: var(--primary-gold);'>PRESALE</div><div class='countdown-label'>ENDED</div></div>";
            }
        }

        function updateBurnCounter(burnReserve) {
            // ËøôÈáåÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÁáÉÁÉßÈÄªËæëÊõ¥Êñ∞
            document.getElementById('burnCounter').textContent = 
                `Burn Reserve: ${ethers.utils.formatUnits(burnReserve, decimals)} BULL`;
        }

        // ==================== Èí±ÂåÖËøûÊé• ====================
        async function connectWallet() {
            if (!window.ethereum) {
                showNotification("Please install MetaMask!");
                return;
            }

            try {
                // ÂàáÊç¢Âà∞ BNB Chain
                try {
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: CONFIG.CHAIN_ID }],
                    });
                } catch (switchError) {
                    // Â¶ÇÊûúÈìæ‰∏çÂ≠òÂú®ÔºåÊ∑ªÂä†ÂÆÉ
                    if (switchError.code === 4902) {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: CONFIG.CHAIN_ID,
                                chainName: CONFIG.CHAIN_NAME,
                                rpcUrls: [CONFIG.RPC_URL],
                                nativeCurrency: {
                                    name: CONFIG.CURRENCY_NAME,
                                    symbol: CONFIG.CURRENCY_SYMBOL,
                                    decimals: CONFIG.DECIMALS,
                                },
                                blockExplorerUrls: ['https://bscscan.com/'],
                            }],
                        });
                    }
                }

                // ËØ∑Ê±ÇË¥¶Êà∑
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAddress = accounts[0];

                // Êõ¥Êñ∞ Provider Âíå Contract
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                contract = new ethers.Contract(CONFIG.CONTRACT_ADDRESS, CONFIG.CONTRACT_ABI, signer);

                // Êõ¥Êñ∞ UI
                updateWalletUI();
                showNotification("Wallet connected successfully!");

                // ÁõëÂê¨Ë¥¶Êà∑ÂèòÂåñ
                window.ethereum.on('accountsChanged', (accounts) => {
                    if (accounts.length === 0) {
                        disconnectWallet();
                    } else {
                        userAddress = accounts[0];
                        updateWalletUI();
                    }
                });

                // ÁõëÂê¨ÈìæÂèòÂåñ
                window.ethereum.on('chainChanged', () => {
                    window.location.reload();
                });

            } catch (error) {
                console.error("Failed to connect wallet:", error);
                showNotification("Failed to connect wallet: " + error.message);
            }
        }

        function disconnectWallet() {
            userAddress = null;
            signer = null;
            // ÈáçÊñ∞ÂàùÂßãÂåñ‰∏∫Âè™ËØª
            initContract();
            updateWalletUI();
            showNotification("Wallet disconnected");
        }

        function updateWalletUI() {
            const walletStatus = document.getElementById('walletStatus');
            const walletAddress = document.getElementById('walletAddress');
            const buyButton = document.getElementById('buyButton');
            const stakeButton = document.getElementById('stakeButton');

            if (userAddress) {
                walletStatus.style.display = 'block';
                walletAddress.textContent = `${userAddress.slice(0, 6)}...${userAddress.slice(-4)}`;
                buyButton.textContent = 'Buy $BULL';
                buyButton.disabled = false;
                stakeButton.disabled = false;
                checkClaimStatus();
            } else {
                walletStatus.style.display = 'none';
                buyButton.textContent = 'Connect Wallet to Buy';
                buyButton.disabled = true;
                stakeButton.disabled = true;
            }
        }

        // ==================== Ë¥≠‰π∞‰ª£Â∏Å ====================
        async function buyTokens() {
            if (!userAddress) {
                await connectWallet();
                return;
            }

            const bnbAmount = document.getElementById('bnbAmount').value;
            const referrerAddress = document.getElementById('referrerAddress').value || ethers.constants.AddressZero;

            if (!bnbAmount || parseFloat(bnbAmount) <= 0) {
                showNotification("Please enter a valid BNB amount");
                return;
            }

            try {
                // Ê£ÄÊü•Êé®Ëçê‰∫∫Âú∞ÂùÄ
                if (referrerAddress !== ethers.constants.AddressZero && !ethers.utils.isAddress(referrerAddress)) {
                    showNotification("Invalid referrer address");
                    return;
                }

                // Ê£ÄÊü•È¢ÑÂîÆÁä∂ÊÄÅ
                const presaleActive = await contract.presaleActive();
                if (!presaleActive) {
                    showNotification("Presale is not active");
                    return;
                }

                showNotification("Processing purchase... Please wait");

                // Ë∞ÉÁî® buyTokens ÂáΩÊï∞
                const tx = await contract.buyTokens(
                    referrerAddress,
                    0, // _minTokensOut - ËÆæÁΩÆ‰∏∫ 0 Ë°®Á§∫Êé•Âèó‰ªª‰ΩïÊï∞Èáè
                    { value: ethers.utils.parseEther(bnbAmount) }
                );

                showNotification("Transaction sent! Waiting for confirmation...");
                const receipt = await tx.wait();

                showNotification("Purchase successful! Tokens will be available after presale.");
                
                // Ê∏ÖÁ©∫ËæìÂÖ•
                document.getElementById('bnbAmount').value = '';
                document.getElementById('referrerAddress').value = '';
                document.getElementById('tokenEstimate').textContent = 'Enter BNB amount to see estimated $BULL';

                // Âà∑Êñ∞Êï∞ÊçÆ
                await loadContractData();

            } catch (error) {
                console.error("Purchase failed:", error);
                if (error.code === 'ACTION_REJECTED') {
                    showNotification("Transaction rejected by user");
                } else {
                    showNotification("Purchase failed: " + (error.data?.message || error.message));
                }
            }
        }

        // ==================== ËÆ§È¢Ü‰ª£Â∏Å ====================
        async function claimTokens() {
            if (!userAddress) return;

            try {
                showNotification("Claiming tokens... Please wait");
                const tx = await contract.claimTokens();
                await tx.wait();
                showNotification("Tokens claimed successfully!");
                document.getElementById('claimButton').style.display = 'none';
            } catch (error) {
                console.error("Claim failed:", error);
                showNotification("Claim failed: " + error.message);
            }
        }

        async function checkClaimStatus() {
            if (!userAddress || !contract) return;

            try {
                const [hasClaimed, presaleEnded, userPurchases] = await Promise.all([
                    contract.hasClaimed(userAddress),
                    contract.presaleEnded(),
                    contract.userPurchases(userAddress)
                ]);

                const claimButton = document.getElementById('claimButton');
                if (presaleEnded && !hasClaimed && userPurchases.gt(0)) {
                    claimButton.style.display = 'inline-block';
                } else {
                    claimButton.style.display = 'none';
                }
            } catch (error) {
                console.error("Failed to check claim status:", error);
            }
        }

        // ==================== Ë¥®ÊäºÂäüËÉΩ ====================
        async function stakeTokens() {
            if (!userAddress) {
                await connectWallet();
                return;
            }

            const amount = document.getElementById('stakeAmount').value;
            const lockDays = document.getElementById('lockDays').value;

            if (!amount || parseFloat(amount) <= 0) {
                showNotification("Please enter a valid amount");
                return;
            }

            try {
                // Ê£ÄÊü•Ë¥®ÊäºÊòØÂê¶ÂêØÁî®
                const stakingEnabled = await contract.stakingEnabled();
                if (!stakingEnabled) {
                    showNotification("Staking is not enabled yet");
                    return;
                }

                showNotification("Approving tokens... Please wait");
                
                // ÂÖàÊâπÂáÜÂêàÁ∫¶‰ΩøÁî®‰ª£Â∏Å
                const approveTx = await contract.approve(
                    CONFIG.CONTRACT_ADDRESS,
                    ethers.utils.parseUnits(amount, decimals)
                );
                await approveTx.wait();

                showNotification("Staking tokens... Please wait");
                
                // Ë∞ÉÁî® stake ÂáΩÊï∞
                const stakeTx = await contract.stake(
                    ethers.utils.parseUnits(amount, decimals),
                    lockDays
                );
                await stakeTx.wait();

                showNotification("Staking successful!");
                document.getElementById('stakeAmount').value = '';

            } catch (error) {
                console.error("Staking failed:", error);
                showNotification("Staking failed: " + error.message);
            }
        }

        async function unstakeTokens() {
            // ËøôÈáåÈúÄË¶ÅÂÆûÁé∞Êü•ËØ¢Áî®Êà∑Ë¥®ÊäºÂàóË°®ÁöÑÈÄªËæë
            showNotification("Unstake functionality requires stake index selection");
        }

        // ==================== ‰∫ã‰ª∂ÁõëÂê¨ ====================
        function setupEventListeners() {
            // Ë¥≠‰π∞ÊåâÈíÆÁÇπÂáª
            document.getElementById('buyButton').addEventListener('click', async () => {
                if (!userAddress) {
                    await connectWallet();
                } else {
                    await buyTokens();
                }
            });

            // BNB Êï∞ÈáèËæìÂÖ•ÂèòÂåñÊó∂‰º∞ÁÆó‰ª£Â∏Å
            document.getElementById('bnbAmount').addEventListener('input', async () => {
                const amount = document.getElementById('bnbAmount').value;
                if (amount && parseFloat(amount) > 0 && contract) {
                    try {
                        const currentRate = await contract.currentRate();
                        const estimatedTokens = parseFloat(amount) * parseFloat(ethers.utils.formatUnits(currentRate, 0));
                        document.getElementById('tokenEstimate').textContent = 
                            `Estimated: ~${estimatedTokens.toLocaleString()} $BULL`;
                    } catch (error) {
                        console.error("Failed to estimate tokens:", error);
                    }
                } else {
                    document.getElementById('tokenEstimate').textContent = 
                        'Enter BNB amount to see estimated $BULL';
                }
            });

            // ÁõëÂê¨ÂêàÁ∫¶‰∫ã‰ª∂
            if (contract) {
                contract.on('TokensPurchased', (buyer, tokenAmount, bnbAmount) => {
                    console.log("Tokens purchased:", { buyer, tokenAmount, bnbAmount });
                    loadContractData();
                });

                contract.on('RoarBurn', (amount, stage) => {
                    console.log("Roar Burn:", { amount, stage });
                    loadContractData();
                    showNotification(`Roar Burn! ${ethers.utils.formatUnits(amount, decimals)} BULL burned at Stage ${stage}`);
                });

                contract.on('PresaleEnded', () => {
                    console.log("Presale ended");
                    loadContractData();
                    showNotification("Presale has ended!");
                });
            }
        }

        // ==================== ÈÄöÁü•ÂäüËÉΩ ====================
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
    </script>
</body>
</html>
